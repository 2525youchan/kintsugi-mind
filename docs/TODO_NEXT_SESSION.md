# 📋 次回セッションのTODO（2026-01-27）

> **リマインダー**: このファイルを開発開始時に確認してください！

---

## 🎯 明日やること：無料体験の価値を高める機能

### 残りの実装タスク

| # | 体験 | 状態 | 難易度 | 優先度 |
|---|------|------|--------|--------|
| 1 | **毎日の禅語・公案** | ❌ 未実装 | 低 | 🥇 最優先 |
| 2 | **感情の可視化グラフ** | ⚠️ 部分的 | 中 | 🥈 |
| 3 | **初回の器診断強化** | ⚠️ 部分的 | 低 | 🥉 |

---

## 1. 毎日の禅語・公案（最優先）

**目的**: 毎日アプリを開く理由を作る

**実装内容**:
- [ ] ホームページに「今日の禅語」セクション追加
- [ ] 日替わりで禅語/公案を表示（50+のコレクション）
- [ ] SNSシェアボタン（Twitter, Instagram用に画像生成）
- [ ] 過去の禅語アーカイブページ

**技術メモ**:
```javascript
// 日付ベースで禅語を選択
const dayOfYear = Math.floor((Date.now() - new Date(new Date().getFullYear(), 0, 0)) / 86400000);
const koanIndex = dayOfYear % koans.length;
```

---

## 2. 感情の可視化グラフ

**目的**: 1ヶ月の心の天気を美しく表示

**実装内容**:
- [ ] プロフィールページにグラフセクション追加
- [ ] 月間カレンダーヒートマップ（GitHubのContribution風）
- [ ] 天気アイコンで日ごとの状態を表示
- [ ] トレンド分析（「先週より晴れの日が多い」等）

**技術メモ**:
- チェックイン履歴は `kintsugi-checkin-history` に保存済み
- Chart.js CDNを使用

---

## 3. 初回の器診断強化

**目的**: シェアしたくなる診断結果

**実装内容**:
- [ ] 5つの質問で性格診断
- [ ] 結果に基づいて「あなたの器」を提案
- [ ] 診断結果カード画像生成
- [ ] SNSシェアボタン

**質問例**:
1. ストレスを感じた時、最初にどうしますか？
2. 理想の休日の過ごし方は？
3. 新しい挑戦への態度は？
4. 人間関係で大切にしていることは？
5. 自分の弱点をどう捉えていますか？

---

## ✅ 今日完了したこと（2026-01-26）

### セキュリティ改善（Dev Bible準拠）
- [x] レートリミット実装（ログイン: 10回/分, AI: 20回/分）
- [x] SELECT * を明示的カラムに変更（4箇所）
- [x] セキュリティヘッダー追加（X-Frame-Options, HSTS等）
- [x] CORS設定の明示的定義
- [x] セッション削除API
- [x] ヘルスチェックAPI

### ユーザー離脱防止
- [x] 7日間金継ぎチャレンジ（/challenge）
- [x] 進捗トラッキング（LocalStorage + サーバー同期）
- [x] 完走報酬「黄金の器」
- [x] ホームページにチャレンジバナー

---

## 🔗 重要なURL

- **サンドボックス**: https://3000-if9tga8gtcbj5qwvegti3-2e77fc33.sandbox.novita.ai
- **本番**: https://kintsugi-mind.pages.dev
- **GitHub**: https://github.com/2525youchan/kintsugi-mind
- **Dev Bible**: https://github.com/2525youchan/dev-bible

---

## 📌 注意事項

- 英語版の価格は $10/月 に変更済み（日本語版は ¥980/月 のまま）
- Stripe統合は最後に実施
- 多言語対応より先にアプリ完成度を優先

---

*作成日: 2026-01-26*
